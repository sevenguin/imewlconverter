经过了3个多月的沉寂，今天深蓝词库转换终于迎来了1.9版。这次版本升级主要包含了以下新特性：

一、支持微软英库Engkoo拼音输入法。

微软英库（Engkoo）拼音输入法是微软新推出适用于Win8的输入法，虽然还在Beta阶段，但是发展比较迅猛，最近的版本中已经支持文本词库的导入，所以想尝鲜使用英库输入法的同学们不用担心你之前使用的QQ拼音或者搜狗拼音的积累了那么久的词库无法在英库输入法中使用。

深蓝此刻转换能够支持将各种词库文件转换为英库拼音输入法的词库。杯具的是Engkoo拼音输入法一次只支持10000条词条，所以如果词条数据比较大的话，那么就需要分割转换后的词库文件，每个词库文件10000条，然后再依次导入。希望接下来的Engkoo输入法能够取消该限制。

二、新增文件分割功能，可以按照设定的词条行数、文件大小或者字符个数进行分割。

这个功能主要是针对Engkoo拼音输入法的一次只能导入10000条词条的限制而做的，我在搜狗拼音下有个人词库16W条，这Engkoo输入法只支持其中的1W条显然是不能满足我的要求的，所以需要将生成的Engkoo词库进行分割。选择帮助菜单下的“文件分割”选项，可以弹出文件分割窗口，选择转换而来的Engkoo词库，然后选择按行数分割，每个文件1W行，然后就可以将该转换而来的Engkoo词库分割成16个文件，如图所示：



然后进入Engkoo输入法，选择“专业词典”选项，一个个点击“导入文本词库”即可将我原来搜狗拼音里面的词库转换到英库输入法中。



三、支持搜狗拼音bin格式备份词库。

搜狗拼音虽然支持文本格式词库的导出，但是在其文本词库中不包含词频信息，所以我花了点时间对搜狗拼音输入法的bin格式备份词库进行格式分析，终于实现了对其的解析。具体操作方法和普通词库转换方式方式类似，先在搜狗拼音输入法的设置面板的词库选项卡中选择“词库备份”，单击“执行该操作”按钮，即可将当前的词库备份以bin格式备份到硬盘上。然后将该bin文件选择到深蓝词库转换中，选择词库源为“搜狗拼音备份词库bin”，目标选择需要转换的其他输入法，然后单击转换按钮即可完成bin词库的解析和转换。



四、支持中州韵（小狼毫、鼠须管）输入法。

中州韵输入法引擎是一个跨平台的开源输入法引擎，在Linux上叫中州韵，在Windows下叫小狼毫，在Mac上叫鼠须管。软件下载地址：http://code.google.com/p/rimeime/

经过试用，这是一款非常不错的输入法，尤其是在Linux和Mac下其他好用的输入法太少。我由于平时使用的是Win7，所以就以Windows下的小狼毫为例，说明如何将用户词库转换到小狼毫中。首先将深蓝词库转换中将目标选成“中州韵”，然后转换并保存到硬盘上。



接下来是在Windows的托盘图标中找到小狼毫的图标，右击选择“用户词典管理”，然后选择luna\_pinyin，单击“导入文本码表”，选中刚才保存的文件，马上就可以将我们的词库导入到小狼毫的词库中了。



该词库同样可以导入到Mac版的鼠须管输入法中，下载鼠须管的词库导入工具（http://code.google.com/p/rimeime/downloads/detail?name=rime_dict_manager_0.9.2_osx.zip&can=2&q=），然后按照导入工具的命令格式，将我们的搜狗拼音词库导入到鼠须管的命令为：

./rime\_dict\_manager –i luna\_pinyin Sougou.txt

运行结果如图所示，正确导入了我们的搜狗词库。



五、支持FIT输入法。

FIT输入法是Mac下非常出名的输入法，由于我很少使用Mac，所以一直没有涉及到这个输入法。最近有人在项目网站上给出了FIT输入法的词库文件，我就照猫画虎，按照FIT词库的格式，实现了FIT输入法词库的转换。在Mac虚拟机上测试，能够正常导入。在Mac的FIT输入法的“输入法设置”窗口中，选择词库选项卡，然后单击词库列表下的+按钮，添加我们转换而来的FIT词库，不一会儿即可把我们转换的词库导入到FIT输入法中，下图是导入成功的FIT词库页面：



需要注意的是，FIT对大数据量的词库导入支持不是很好，速度很慢，所以还是得需要前面提到的文件分割器，将用户词库分割成多个文件，然后再依次导入。

六、增强自定义格式的导出功能，以支持更多的输入法。

现在的五笔输入法虽然没有拼音输入法那么流行，但是算下来还是有七八种常用的五笔输入法，而且这些五笔输入法也在持续更新并支持词库的导入导出，所有我也根据这些五笔输入法词库的特点，增强了自定义格式的导出功能，实现了其词库的转换。由于本软件没有五笔词根的生成功能，所以对于不支持纯汉字导入的五笔输入法，可以先使用搜狗五笔或者QQ五笔，将转换后的纯文本词库导入，然后到处成带五笔编码的词库，再导入到其他五笔输入法中。

小鸭五笔本身支持存文本词库的导入到五笔输入法中，小鸭五笔也支持拼音词库，不过其格式与其他输入法不同，一个词的各个字的拼音之间是没有间隔的，所以我在自定义的格式中加入了拼音之间无分隔符的支持。
万能五笔不支持纯文本词库的导入，只支持“编码 汉字”这种格式的词库。
光速五笔输入法，感觉应该和万能五笔是同一个东西，界面非常类似，本机测试导入词库有Bug，无法导入自己导出的词库。
搜狗五笔，支持纯文本词库导入。
QQ五笔，支持纯文本词库导入。
万能五笔，五笔支持“编码 汉字”这种格式的词库，拼音词库支持“拼音无分隔符 汉字”格式的词库，可以通过自定义格式导入。
七、优化代码，修改Bug。

从代码级整合了QQ分类词库专用的Zip压缩算法所用的库，使得最终程序就只有“深蓝词库转换.exe”这么一个文件，不会有其他依赖的dll文件。修改了发现的Bug，对文件类型过滤、文件格式感知进行了优化。